<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

require_once('nova-framework/google_fonts.php');
$storeId = Mage::app()->getStore()->getStoreId();
$pageLayout=$this->getLayout()->getBlock('root')->getTemplate(); 
$page = Mage::app()->getFrontController()->getRequest()->getRouteName();
if ($page == 'cms'):
    $is_home=(Mage::getSingleton('cms/page')->getIdentifier()== Mage::getStoreConfig('web/default/cms_home_page')) ? true :false;
endif;  
//var_dump($is_home);
//die();

$heading_font_url 	= str_replace(' ', '+',Mage::getStoreConfig('themeoptions_theming/theme_fonts/heading_font', $storeId));
$preset 			= Mage::getStoreConfig('themeoptions_theming/themeoptions_background_images/presets', $storeId);
$media_path	   		= Mage::getBaseUrl('media') . 'theming/';
$skin_path_paterns	= $this->getSkinUrl('paterns/');
$skin_path_cart		= $this->getSkinUrl('options_images/');
$skin_path_rating	= $this->getSkinUrl('stars/');

// Body Images
$body_pattern 				= Mage::getStoreConfig('themeoptions_background_images/body_background/body_pattern', $storeId);
$body_background_image 		= Mage::getStoreConfig('themeoptions_background_images/body_background/body_background_image', $storeId);
$container_width  			= Mage::getStoreConfig('themeoptions_theming/design_layout/container_width', $storeId);
if(!empty($body_background_image)){
	$body_background_image = $media_path.$body_background_image;
}elseif(!empty($body_pattern) || $body_pattern != 0){
	$body_background_image = $skin_path_paterns.$body_pattern.'.png';
}else{
	$body_background_image = '';
}

$body_background_repeat 	= Mage::getStoreConfig('themeoptions_background_images/body_background/body_background_repeat', $storeId);
$body_background_attachment = Mage::getStoreConfig('themeoptions_background_images/body_background/body_background_attachment', $storeId);
$body_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/body_background/body_background_postition', $storeId);
$body_background_size 		= Mage::getStoreConfig('themeoptions_background_images/body_background/body_background_size', $storeId);

// Header Images
$header_pattern 				= Mage::getStoreConfig('themeoptions_background_images/header_background/header_pattern', $storeId);
$header_background_image 		= Mage::getStoreConfig('themeoptions_background_images/header_background/header_background_image', $storeId);

if(!empty($header_background_image)){
	$header_background_image = $media_path.$header_background_image;
}elseif(!empty($header_pattern) || $header_pattern != 0){
	$header_background_image = $skin_path_paterns.$header_pattern.'.png';
}else{
	$header_background_image = '';
}

$header_background_repeat 		= Mage::getStoreConfig('themeoptions_background_images/header_background/header_background_repeat', $storeId);
$header_background_attachment 	= Mage::getStoreConfig('themeoptions_background_images/header_background/header_background_attachment', $storeId);
$header_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/header_background/header_background_postition', $storeId);
$header_background_size 		= Mage::getStoreConfig('themeoptions_background_images/header_background/header_background_size', $storeId);

// Menu Images
$menu_pattern 					= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_pattern', $storeId);
$menu_background_image 			= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_background_image', $storeId);

if(!empty($menu_background_image)){
	$menu_background_image = $media_path.$menu_background_image;
}elseif(!empty($menu_pattern) || $menu_pattern != 0){
	$menu_background_image = $skin_path_paterns.$menu_pattern.'.png';
}else{
	$menu_background_image = '';
}

$menu_background_repeat 		= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_background_repeat', $storeId);
$menu_background_attachment 	= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_background_attachment', $storeId);
$menu_background_postition 		= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_background_postition', $storeId);
$menu_background_size 			= Mage::getStoreConfig('themeoptions_background_images/main_menu_background/menu_background_size', $storeId);


// Sub Menu Shadow
$sub_menu_shadow_style  = Mage::getStoreConfig('themeoptions_colors_styles/main_menu_style/sub_menu_shadow_style', $storeId);

if($sub_menu_shadow_style == 1){
	$sub_menu_shadow_style = '0 5px 20px rgba(0, 0, 0, 0.3);';
}elseif($sub_menu_shadow_style == 0){
	$sub_menu_shadow_style = '0;';
}else{
	$sub_menu_shadow_style = '';
}
//var_dump($sub_menu_shadow_style);

// Main Images
$main_pattern 					= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_pattern', $storeId);
$main_background_image 			= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_background_image', $storeId);

if(!empty($main_background_image)){
	$main_background_image = $media_path.$main_background_image;
}elseif(!empty($main_pattern) || $main_pattern != 0){
	$main_background_image = $skin_path_paterns.$main_pattern.'.png';
}else{
	$main_background_image = '';
}

$main_background_repeat 		= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_background_repeat', $storeId);
$main_background_attachment 	= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_background_attachment', $storeId);
$main_background_postition 		= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_background_postition', $storeId);
$main_background_size 			= Mage::getStoreConfig('themeoptions_background_images/main_column_background/main_background_size', $storeId);

// Page Shadow
$main_border_shadow  = Mage::getStoreConfig('themeoptions_colors_styles/general_styles/main_border_shadow', $storeId);

if($main_border_shadow == 1){
	$main_border_shadow = '0 1px 3px rgba(0, 0, 0, 0.2);';
}elseif($main_border_shadow == 0){
	$main_border_shadow = '0;';
}else{
	$main_border_shadow = '';
}
//var_dump($main_border_shadow);

$left_column_heading_background_image 			= Mage::getStoreConfig('themeoptions_colors_styles/general_styles/left_column_heading_background_image', $storeId);
$left_column_heading_background_repeat 			= Mage::getStoreConfig('themeoptions_colors_styles/general_styles/left_column_heading_background_repeat', $storeId);
$left_column_heading_background_attachment 		= Mage::getStoreConfig('themeoptions_colors_styles/general_styles/left_column_heading_background_attachment', $storeId);
$left_column_heading_background_postition 		= Mage::getStoreConfig('themeoptions_colors_styles/general_styles/left_column_heading_background_postition', $storeId);
$left_column_heading_background_size 			= Mage::getStoreConfig('themeoptions_colors_styles/general_styles/left_column_heading_background_size', $storeId);

$rating_stars_img 	   = Mage::getStoreConfig('themeoptions_colors_styles/midsection_style/rating_stars_img', $storeId);

$responsive_layoyut	   			= Mage::getStoreConfig('themeoptions_general/general_options/responsive_layout', $storeId);


// Product Shadow
$product_box_shadow_style  = Mage::getStoreConfig('themeoptions_colors_styles/midsection_style/product_box_shadow_style', $storeId);

if($product_box_shadow_style == 1){
	$product_box_shadow_style = '0 0 20px rgba(0, 0, 0, 0.2);';
}elseif($product_box_shadow_style == 0){
	$product_box_shadow_style = '0;';
}else{
	$product_box_shadow_style = '';
}
//var_dump($product_box_shadow_style);

// Footer B Images
$footer_b_pattern 				= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_pattern', $storeId);
$footer_b_background_image 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_background_image', $storeId);

if(!empty($footer_b_background_image)){
	$footer_b_background_image = $media_path.$footer_b_background_image;
}elseif(!empty($footer_b_pattern) || $footer_b_pattern != 0){
	$footer_b_background_image = $skin_path_paterns.$footer_b_pattern.'.png';
}else{
	$footer_b_background_image = '';
}

$footer_b_background_repeat 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_background_repeat', $storeId);
$footer_b_background_attachment = Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_background_attachment', $storeId);
$footer_b_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_background_postition', $storeId);
$footer_b_background_size 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_b_background_size', $storeId);

// Footer C Images
$footer_c_pattern 				= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_pattern', $storeId);
$footer_c_background_image 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_background_image', $storeId);

if(!empty($footer_c_background_image)){
	$footer_c_background_image = $media_path.$footer_c_background_image;
}elseif(!empty($footer_c_pattern) || $footer_c_pattern != 0){
	$footer_c_background_image = $skin_path_paterns.$footer_c_pattern.'.png';
}else{
	$footer_c_background_image = '';
}

$footer_c_background_repeat 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_background_repeat', $storeId);
$footer_c_background_attachment = Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_background_attachment', $storeId);
$footer_c_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_background_postition', $storeId);
$footer_c_background_size 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_c_background_size', $storeId);

//Footer D Images
$footer_d_pattern 				= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_pattern', $storeId);
$footer_d_background_image 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_background_image', $storeId);

if(!empty($footer_d_background_image)){
	$footer_d_background_image = $media_path.$footer_d_background_image;
}elseif(!empty($footer_d_pattern) || $footer_d_pattern != 0){
	$footer_d_background_image = $skin_path_paterns.$footer_d_pattern.'.png';
}else{
	$footer_d_background_image = '';
}

$footer_d_background_repeat 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_background_repeat', $storeId);
$footer_d_background_attachment = Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_background_attachment', $storeId);
$footer_d_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_background_postition', $storeId);
$footer_d_background_size 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_d_background_size', $storeId);

// Footer E Images
$footer_e_pattern 				= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_pattern', $storeId);
$footer_e_background_image 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_background_image', $storeId);

if(!empty($footer_e_background_image)){
	$footer_e_background_image = $media_path.$footer_e_background_image;
}elseif(!empty($footer_e_pattern) || $footer_e_pattern != 0){
	$footer_e_background_image = $skin_path_paterns.$footer_e_pattern.'.png';
}else{
	$footer_e_background_image = '';
}

$footer_e_background_repeat 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_background_repeat', $storeId);
$footer_e_background_attachment = Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_background_attachment', $storeId);
$footer_e_background_postition 	= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_background_postition', $storeId);
$footer_e_background_size 		= Mage::getStoreConfig('themeoptions_background_images/footer_background/footer_e_background_size', $storeId);

//function GoogleFont($name) {
//			if($name) {
//            	echo '<link rel="stylesheet"  href="http://fonts.googleapis.com/css?family=' . $name . '" type="text/css" media="screen" />';
//            }
//}

?>
<meta http-equiv="Content-Type" content="<?php echo $this->getContentType() ?>" />
<title><?php echo $this->getTitle() ?></title>
<?php if($responsive_layoyut):?>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<?php endif; ?>
<meta name="description" content="<?php echo htmlspecialchars($this->getDescription()) ?>" />
<meta name="keywords" content="<?php echo htmlspecialchars($this->getKeywords()) ?>" />
<meta name="robots" content="<?php echo htmlspecialchars($this->getRobots()) ?>" />
<link rel="icon" href="<?php echo $this->getFaviconFile(); ?>"/>
<link rel="shortcut icon" href="<?php echo $this->getFaviconFile(); ?>"/>	
<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = '<?php echo $this->helper('core/js')->getJsUrl('blank.html') ?>';
    var BLANK_IMG = '<?php echo $this->helper('core/js')->getJsUrl('spacer.gif') ?>';
//]]>
</script>
<![endif]-->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<?php google_fonts(); ?>

<?php echo $this->getCssJsHtml() ?>
<?php if($body_background_image):?>
<style type="text/css">
body {
	background-image: url(<?php echo $body_background_image; ?>);
	background-repeat: <?php echo $body_background_repeat;?>;
	background-attachment: <?php echo $body_background_attachment;?>;
	background-position: <?php echo $body_background_postition;?>;
	background-size: <?php echo $body_background_size;?>;
}

</style>
<?php endif;?>
<?php if($container_width != 1170) : ?>
<style type="text/css">
@media (min-width: 1200px) {
	.container {
	width: <?php echo $container_width ?>px;
	}
}
</style>
<?php endif;?>
<?php if($sub_menu_shadow_style):?>
<style type="text/css">
.shown-sub .itemgrid-1col, 
.shown-sub .itemgrid-2col, 
.shown-sub .itemgrid-3col, 
.shown-sub .itemgrid-4col, 
.shown-sub .itemgrid-5col, 
.shown-sub .itemgrid-6col, 
.shown-sub .menut_brands,
.shown-sub .blog,
.shown-sub .custom-link,
.shown-sub .custom-menu, 
.shown-sub .menu-custom, 
.shown-sub .infor-mation, 
.shown-sub .menu_contacts,
#novaworks-nav li .shown-sub li div.shown-sub {
	-webkit-box-shadow: <?php echo $sub_menu_shadow_style; ?>
	-moz-box-shadow: <?php echo $sub_menu_shadow_style; ?>
	box-shadow: <?php echo $sub_menu_shadow_style; ?>
}

</style>
<?php endif;?>

<?php if($main_border_shadow):?>
<style type="text/css">
.page {
	-webkit-box-shadow: <?php echo $main_border_shadow; ?>
	-moz-box-shadow: <?php echo $main_border_shadow; ?>
	box-shadow: <?php echo $main_border_shadow; ?>
}

</style>
<?php endif;?>

<?php if($header_background_image):?>
<style type="text/css">
.nav-container {
	background-image: url(<?php echo $header_background_image; ?>);
	background-repeat: <?php echo $header_background_repeat;?>;
	background-attachment: <?php echo $header_background_attachment;?>;
	background-position: <?php echo $header_background_postition;?>;
	background-size: <?php echo $header_background_size;?>;
}

</style>
<?php endif;?>

<?php if($menu_background_image):?>
<style type="text/css">
.main-navigation .header-topMenu .header-topMenu-inner,
.sticky-wrapper.is-sticky .main-navigation .header-topMenu .header-topMenu-inner {
	background-image: url(<?php echo $menu_background_image; ?>);
	background-repeat: <?php echo $menu_background_repeat;?>;
	background-attachment: <?php echo $menu_background_attachment;?>;
	background-position: <?php echo $menu_background_postition;?>;
	background-size: <?php echo $menu_background_size;?>;
}

</style>
<?php endif;?>

<?php if($main_background_image):?>
<style type="text/css">
.novaworks-main-content {	
	background-image: url(<?php echo $main_background_image; ?>);
	background-repeat: <?php echo $menu_background_repeat; ?>;
	background-attachment: <?php echo $menu_background_attachment; ?>;
	background-position: <?php echo $menu_background_postition; ?>;
	background-size: <?php echo $menu_background_size; ?>;
}

</style>
<?php endif;?>



<?php if($left_column_heading_background_image):?>
<style type="text/css">
.block .block-title {
	background-image: url(<?php echo $media_path.$left_column_heading_background_image; ?>);
	background-repeat: <?php echo $left_column_heading_background_repeat; ?>;
	background-attachment: <?php echo $left_column_heading_background_attachment; ?>;
	background-position: <?php echo $left_column_heading_background_postition; ?>;
	background-size: <?php echo $left_column_heading_background_size; ?>;
}
</style>
<?php endif;?>

<?php if($rating_stars_img):?>
<style type="text/css">
.rating-box .rating {
	background: url(<?php echo $skin_path_rating.$rating_stars_img.'.png'; ?>) repeat-x 0 100%;
}
</style>
<?php endif;?>

<?php if($product_box_shadow_style):?>
<style type="text/css">
.products-grid div.items:hover {
	-webkit-box-shadow: <?php echo $product_box_shadow_style; ?>
	-moz-box-shadow: <?php echo $product_box_shadow_style; ?>
	box-shadow: <?php echo $product_box_shadow_style; ?>
}

</style>
<?php endif;?>

<?php if($footer_b_background_image):?>
<style type="text/css">
#footer_b {
	background-image: url(<?php echo $footer_b_background_image; ?>);
	background-repeat: <?php echo $footer_b_background_repeat;?>;
	background-attachment: <?php echo $footer_b_background_attachment;?>;
	background-position: <?php echo $footer_b_background_postition;?>;
	background-size: <?php echo $footer_b_background_size;?>;
}
</style>
<?php endif;?>

<?php if($footer_c_background_image):?>
<style type="text/css">
#footer_c {
	background-image: url(<?php echo $footer_c_background_image; ?>);
	background-repeat: <?php echo $footer_c_background_repeat;?>;
	background-attachment: <?php echo $footer_c_background_attachment;?>;
	background-position: <?php echo $footer_c_background_postition;?>;
	background-size: <?php echo $footer_c_background_size;?>;
}
</style>
<?php endif;?>

<?php if($footer_d_background_image):?>
<style type="text/css">
#footer_d {
	background-image: url(<?php echo $footer_d_background_image; ?>);
	background-repeat: <?php echo $footer_d_background_repeat;?>;
	background-attachment: <?php echo $footer_d_background_attachment;?>;
	background-position: <?php echo $footer_d_background_postition;?>;
	background-size: <?php echo $footer_d_background_size;?>;
}
</style>
<?php endif;?>

<?php if($footer_e_background_image):?>
<style type="text/css">
#footer_e {
	background-image: url(<?php echo $footer_e_background_image; ?>);
	background-repeat: <?php echo $footer_e_background_repeat;?>;
	background-attachment: <?php echo $footer_e_background_attachment;?>;
	background-position: <?php echo $footer_e_background_postition;?>;
	background-size: <?php echo $footer_e_background_size;?>;
}
</style>
<?php endif;?>

<?php 
$theme_layout 		= Mage::getStoreConfig('themeoptions_theming/design_layout/theme_layout', $storeId);
if($theme_layout==2):
?>
<link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/boxed-layout.css')?>" media="all" />
<?php endif; ?>
<?php if($responsive_layoyut):?>
<link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/responsive.css')?>" media="all" />
<?php endif; ?>
<?php echo $this->getChildHtml() ?>
<?php echo $this->helper('core/js')->getTranslatorScript() ?>
<?php echo $this->getIncludes() ?>
<?php if($pageLayout!='page/empty.phtml'):?>
<script type='text/javascript' src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_JS);?>novaworks/jquery.isotope.min.js"></script>
<script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=false'></script>
<script type='text/javascript' src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_JS);?>novaworks/functions.js"></script>

<?php 
if (Mage::getStoreConfig('imagezoomconfig/general/zoomclound_enable')) {
$css = '
	<style type="text/css">
		.cloud-zoom-lens {
			border: '.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/lens_border').'px solid '.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/lens_border_color').';
			margin:-'.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/lens_border').'px;	/* Set this to minus the border thickness. */
			background-color: '.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/lens_background_color').';	
		}
		.cloud-zoom-big {
			border: '.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/zoom_window_border').'px solid '.Mage::getStoreConfig('imagezoomconfig/imagezoom_style_css/zoom_window_border_color').';
		}
	</style>
';
echo $css;
}
?>	

<?php endif; ?>
<script type="text/javascript">
	 // DOM ready
	 jQuery(function() {
      jQuery(".dropdown-phone").change(function() {
        window.location = jQuery(this).find("option:selected").val();
      });
	 
	 });
</script>
<?php
$ajax_cart			= intval(Mage::getStoreConfig('themeoptions_general/prodcuts_list_page/ajax_cart', $storeId)); 
$ajax_compare		= intval(Mage::getStoreConfig('themeoptions_general/prodcuts_list_page/ajax_compare', $storeId)); 
$ajax_wishlist		= intval(Mage::getStoreConfig('themeoptions_general/prodcuts_list_page/ajax_wishlist', $storeId)); 
?>
<script type="text/javascript">
jQuery(function() {
<?php if($ajax_cart):?>
	jQuery(document).on("click", ".shopping-bag a.btn-remove", function() { 
		deletecart(jQuery(this).attr('href')); 
		return false; 
	});	
<?php endif; ?>
<?php if($ajax_compare):?>
    jQuery(document).on('click','.act-add-to-compare', function () {
    	ajaxcompare(jQuery(this).attr('href'),jQuery(this).attr('data-id'));
    return false;
	});	
    jQuery(document).on('click','.btn-compare-remove', function () {
    	removeCompare(jQuery(this).attr('href'));
    return false;
	});	
    jQuery(document).on('click','.btn-clear-all-compare', function () {
    	clearCompare(jQuery(this).attr('href'));
    return false;
	});
<?php endif; ?>
<?php if($ajax_wishlist &&  $this->helper('customer')->isLoggedIn()):?>
    jQuery(document).on('click','.act-add-to-wishlist', function () {
    	ajaxwishlist(jQuery(this).attr('href'),jQuery(this).attr('data-id'));
    return false;
	});
<?php endif; ?>
});
</script>
